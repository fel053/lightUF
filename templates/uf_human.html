<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />

    <!--
    IMPORTANTE:
    Esta p√°gina es SOLO para humanos.
    No queremos que Google la indexe.
    Google debe indexar SOLO /uf/{numero}/
  -->
    <meta name="robots" content="noindex, nofollow" />

    <!-- Responsive real -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Calculadora UF</title>

    <!--
    CSS INLINE
    - 0 requests extra
    - m√°xima velocidad
    - f√°cil de mantener
  -->
    <style>
      html,
      body {
        margin: 0;
        padding: 0;
        height: 100%;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          Roboto, Arial, sans-serif;
        background: #ffffff;
        color: #111;
      }

      /*
      Layout:
      - No completamente centrado (se ve m√°s profesional en desktop)
      - C√≥modo en m√≥vil
    */
      body {
        display: flex;
        justify-content: center;
        align-items: flex-start;
      }

      .container {
        width: 100%;
        max-width: 520px;
        padding: 24px;
        margin-top: 12vh; /* equilibrio visual desktop / m√≥vil */
        box-sizing: border-box;
        text-align: center;
      }

      h1 {
        font-size: 1.5rem;
        font-weight: 600;
        margin-bottom: 24px;
      }

      input {
        width: 100%;
        font-size: 1.4rem;
        padding: 14px 16px;
        border: 1px solid #ccc;
        border-radius: 8px;
        outline: none;
        box-sizing: border-box;
      }

      input:focus {
        border-color: #000;
      }

      button {
        margin-top: 16px;
        width: 100%;
        padding: 14px;
        font-size: 1rem;
        font-weight: 600;
        border-radius: 8px;
        border: none;
        cursor: pointer;
        background: #000;
        color: #fff;
      }

      button:active {
        opacity: 0.85;
      }

      .hint {
        margin-top: 14px;
        font-size: 0.85rem;
        color: #666;
      }
    </style>
  </head>

  <body>
    <main class="container">
      <!--
      T√≠tulo humano:
      No tiene fecha ni valor ‚Üí no es SEO
    -->
      <h1>Calculadora UF</h1>

      <!--
      Input libre:
      El usuario escribe cualquier n√∫mero
    -->
      <input
        id="uf-input"
        type="number"
        min="0"
        step="any"
        placeholder="Ej: 1400"
        autocomplete="off"
      />

      <!--
      Bot√≥n visible:
      - clave para UX en m√≥vil
      - Enter sigue funcionando
    -->
      <button id="go-btn">Calcular</button>

      <div class="hint">Ingresa un n√∫mero y presiona Enter o el bot√≥n</div>
    </main>

    <!--
    JS m√≠nimo:
    - no calcula
    - no usa APIs
    - no depende del backend
    - solo redirige a HTML est√°tico existente
  -->
    <script>
      // UF del d√≠a (inyectado en build)
      const UF_VALOR = Number("{{UF_VALOR}}");

      const input = document.getElementById("uf-input");
      const button = document.getElementById("go-btn");
      const result = document.getElementById("result");

      // --- C√ÅLCULO HUMANO EN VIVO ---
      input.addEventListener("input", () => {
        const value = parseFloat(input.value);

        if (isNaN(value) || value <= 0) {
          result.textContent = "Ingresa un n√∫mero v√°lido";
          return;
        }

        // üëá protecci√≥n clave
        if (isNaN(UF_VALOR)) {
          result.textContent = "Calculadora activa al publicar el sitio";
          return;
        }

        const clp = Math.round(value * UF_VALOR);

        result.textContent =
          value + " UF ‚âà $" + clp.toLocaleString("es-CL") + " CLP";

        if (Number.isInteger(value)) {
          result.textContent += " ‚Äî presiona Enter para ver el detalle";
        }
      });

      // --- CONFIRMACI√ìN EXPL√çCITA ---
      function confirm() {
        const value = parseFloat(input.value);
        if (!Number.isInteger(value) || value <= 0) return;
        window.location.href = "/uf/" + value + "/";
      }

      input.addEventListener("keydown", (e) => {
        if (e.key === "Enter") confirm();
      });

      button.addEventListener("click", confirm);
    </script>
  </body>
</html>
